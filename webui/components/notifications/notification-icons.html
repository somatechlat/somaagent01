<html>
<head>
    <script type="module">
        // Uses Alpine bridge '$store.notificationSse' exposed by index.js
    </script>
</head>
<body>
    <div x-data>
        <!-- Always render; bindings update once Alpine store present -->
        <div class="notification-toggle" style="display:inline-flex;align-items:center;cursor:pointer;position:relative;"
             :class="{
                 'has-unread': ($store.notificationSse?.unreadCount || 0) > 0,
                 'has-notifications': ($store.notificationSse?.count || 0) > 0
             }"
             @click="openModal('notifications/notification-modal.html')"
             title="View Notifications">
            <div class="notification-icon">
                <span class="material-symbols-outlined">notifications</span>
            </div>
            <span id="notification-badge"
                  x-show="($store.notificationSse?.unreadCount || 0) > 0"
                  class="notification-badge"
                  x-text="$store.notificationSse?.unreadCount || 0"></span>
        </div>

        <!-- Adjacent small connection indicator (do not replace bell) -->
        <div class="conn-indicator"
             :class="`conn-${$store.conn?.status || 'offline'}`"
             :title="$store.conn?.tooltip || 'Offline'"
             aria-live="polite"
             x-bind:aria-label="$store.conn?.tooltip || 'Offline'">
        </div>
    </div>
</body>
</html>
