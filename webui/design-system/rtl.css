/**
 * RTL (Right-to-Left) Layout Support
 * 
 * Styles for RTL languages like Arabic and Hebrew.
 * Applied when html[dir="rtl"] or .rtl class is present.
 * 
 * @module design-system/rtl
 * Requirements: 17.6
 */

/* ============================================
   Base RTL Overrides
   ============================================ */

[dir="rtl"],
.rtl {
  direction: rtl;
  text-align: right;
}

/* ============================================
   Layout Mirroring
   ============================================ */

/* Sidebar */
[dir="rtl"] .app-sidebar,
.rtl .app-sidebar {
  left: auto;
  right: 0;
  border-left: 1px solid var(--c-border);
  border-right: none;
}

[dir="rtl"] .app-main,
.rtl .app-main {
  margin-left: 0;
  margin-right: var(--sidebar-w);
}

[dir="rtl"] .sidebar-collapsed .app-main,
.rtl .sidebar-collapsed .app-main {
  margin-right: var(--sidebar-collapsed-w);
}

/* Navigation */
[dir="rtl"] .nav-item,
.rtl .nav-item {
  padding-left: var(--space-4);
  padding-right: var(--space-3);
}

[dir="rtl"] .nav-item-icon,
.rtl .nav-item-icon {
  margin-left: var(--space-3);
  margin-right: 0;
}

[dir="rtl"] .nav-item[aria-current="page"]::before,
.rtl .nav-item[aria-current="page"]::before {
  left: auto;
  right: 0;
}

/* ============================================
   Chat Messages
   ============================================ */

/* User messages - flip to left */
[dir="rtl"] .message-user,
.rtl .message-user {
  margin-left: 0;
  margin-right: auto;
  text-align: left;
}

/* Assistant messages - flip to right */
[dir="rtl"] .message-assistant,
.rtl .message-assistant {
  margin-right: 0;
  margin-left: auto;
}

/* Message avatars */
[dir="rtl"] .message-avatar,
.rtl .message-avatar {
  margin-left: var(--space-3);
  margin-right: 0;
}

[dir="rtl"] .message-user .message-avatar,
.rtl .message-user .message-avatar {
  margin-right: var(--space-3);
  margin-left: 0;
}

/* ============================================
   Forms
   ============================================ */

/* Input icons */
[dir="rtl"] .input-icon-left,
.rtl .input-icon-left {
  left: auto;
  right: var(--space-3);
}

[dir="rtl"] .input-icon-right,
.rtl .input-icon-right {
  right: auto;
  left: var(--space-3);
}

[dir="rtl"] .input-with-icon-left,
.rtl .input-with-icon-left {
  padding-left: var(--space-3);
  padding-right: var(--space-10);
}

[dir="rtl"] .input-with-icon-right,
.rtl .input-with-icon-right {
  padding-right: var(--space-3);
  padding-left: var(--space-10);
}

/* Checkboxes and radios */
[dir="rtl"] .checkbox-label,
[dir="rtl"] .radio-label,
.rtl .checkbox-label,
.rtl .radio-label {
  padding-left: 0;
  padding-right: var(--space-6);
}

[dir="rtl"] .checkbox-input,
[dir="rtl"] .radio-input,
.rtl .checkbox-input,
.rtl .radio-input {
  left: auto;
  right: 0;
}

/* ============================================
   Buttons
   ============================================ */

/* Button icons */
[dir="rtl"] .btn-icon-left,
.rtl .btn-icon-left {
  margin-left: var(--space-2);
  margin-right: 0;
}

[dir="rtl"] .btn-icon-right,
.rtl .btn-icon-right {
  margin-right: var(--space-2);
  margin-left: 0;
}

/* ============================================
   Cards
   ============================================ */

/* Card header actions */
[dir="rtl"] .card-header-actions,
.rtl .card-header-actions {
  margin-left: 0;
  margin-right: auto;
}

/* Card icon */
[dir="rtl"] .card-icon,
.rtl .card-icon {
  margin-left: var(--space-3);
  margin-right: 0;
}

/* ============================================
   Dropdowns
   ============================================ */

[dir="rtl"] .dropdown-menu,
.rtl .dropdown-menu {
  left: auto;
  right: 0;
}

[dir="rtl"] .dropdown-menu-right,
.rtl .dropdown-menu-right {
  right: auto;
  left: 0;
}

/* ============================================
   Modals
   ============================================ */

/* Modal close button */
[dir="rtl"] .modal-close,
.rtl .modal-close {
  right: auto;
  left: var(--space-4);
}

/* Modal sidebar (settings) */
[dir="rtl"] .modal-sidebar,
.rtl .modal-sidebar {
  border-right: none;
  border-left: 1px solid var(--c-border);
}

/* ============================================
   Tables
   ============================================ */

[dir="rtl"] th,
[dir="rtl"] td,
.rtl th,
.rtl td {
  text-align: right;
}

[dir="rtl"] th:first-child,
[dir="rtl"] td:first-child,
.rtl th:first-child,
.rtl td:first-child {
  padding-left: var(--space-3);
  padding-right: var(--space-4);
}

[dir="rtl"] th:last-child,
[dir="rtl"] td:last-child,
.rtl th:last-child,
.rtl td:last-child {
  padding-right: var(--space-3);
  padding-left: var(--space-4);
}

/* ============================================
   Lists
   ============================================ */

[dir="rtl"] ul,
[dir="rtl"] ol,
.rtl ul,
.rtl ol {
  padding-left: 0;
  padding-right: var(--space-6);
}

/* ============================================
   Tooltips
   ============================================ */

[dir="rtl"] .tooltip-left,
.rtl .tooltip-left {
  left: auto;
  right: 100%;
  margin-right: var(--space-2);
  margin-left: 0;
}

[dir="rtl"] .tooltip-right,
.rtl .tooltip-right {
  right: auto;
  left: 100%;
  margin-left: var(--space-2);
  margin-right: 0;
}

/* ============================================
   Badges
   ============================================ */

[dir="rtl"] .badge-with-icon,
.rtl .badge-with-icon {
  flex-direction: row-reverse;
}

[dir="rtl"] .badge-icon,
.rtl .badge-icon {
  margin-left: var(--space-1);
  margin-right: 0;
}

/* ============================================
   Progress Bars
   ============================================ */

[dir="rtl"] .progress-bar,
.rtl .progress-bar {
  transform-origin: right;
}

/* ============================================
   Breadcrumbs
   ============================================ */

[dir="rtl"] .breadcrumb-separator,
.rtl .breadcrumb-separator {
  transform: scaleX(-1);
}

/* ============================================
   Pagination
   ============================================ */

[dir="rtl"] .pagination,
.rtl .pagination {
  flex-direction: row-reverse;
}

[dir="rtl"] .pagination-prev,
.rtl .pagination-prev {
  transform: scaleX(-1);
}

[dir="rtl"] .pagination-next,
.rtl .pagination-next {
  transform: scaleX(-1);
}

/* ============================================
   Animations
   ============================================ */

/* Slide animations */
[dir="rtl"] .slide-in-left,
.rtl .slide-in-left {
  animation-name: slide-in-right-rtl;
}

[dir="rtl"] .slide-in-right,
.rtl .slide-in-right {
  animation-name: slide-in-left-rtl;
}

@keyframes slide-in-right-rtl {
  from {
    transform: translateX(100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes slide-in-left-rtl {
  from {
    transform: translateX(-100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

/* ============================================
   Utility Classes
   ============================================ */

/* Force LTR for specific elements (code, numbers) */
.ltr {
  direction: ltr;
  text-align: left;
}

/* Force RTL */
.force-rtl {
  direction: rtl;
  text-align: right;
}

/* Flip icon horizontally */
.flip-rtl {
  transform: scaleX(1);
}

[dir="rtl"] .flip-rtl,
.rtl .flip-rtl {
  transform: scaleX(-1);
}

/* Margin/padding logical properties fallback */
[dir="rtl"] .ms-auto,
.rtl .ms-auto {
  margin-left: 0;
  margin-right: auto;
}

[dir="rtl"] .me-auto,
.rtl .me-auto {
  margin-right: 0;
  margin-left: auto;
}

[dir="rtl"] .ps-4,
.rtl .ps-4 {
  padding-left: 0;
  padding-right: var(--space-4);
}

[dir="rtl"] .pe-4,
.rtl .pe-4 {
  padding-right: 0;
  padding-left: var(--space-4);
}

/* ============================================
   Code Blocks (Always LTR)
   ============================================ */

[dir="rtl"] pre,
[dir="rtl"] code,
[dir="rtl"] .code-block,
.rtl pre,
.rtl code,
.rtl .code-block {
  direction: ltr;
  text-align: left;
}
