// Import the component loader and page utilities
import { importComponent } from "i18n.t('ui_i18n_t_ui_i18n_t_ui_components_js')";
import { handleError, createErrorBoundary } from "i18n.t('ui_i18n_t_ui_i18n_t_ui_error_handling_js')";

// Create error boundary for modal system
const modalErrorBoundary = createErrorBoundary('ModalSystem', (errorData) => {
  // Return fallback modal UI
  const fallbackModal = document.createElement('div');
  fallbackModal.className = 'modal-erroi18n.t('ui_times')ack';
  fallbackModal.innerHTML = `
    <div class="i18n.t('ui_i18n_t_ui_i18n_t_ui_modal_error_content')">
      <h3>Modal Error</h3>
      <p>${errorDi18n.t('ui_setup_close_button_handler_with_proper_event_prevention_const_close_button_newmodal_queryselector_modal_close_close_button_addeventlistener_click_event_event_preventdefault_event_stoppropagation_closemodal_add_modal_to_dom_document_body_appendchild_newmodal_initialize_modal_state_const_modaldata_element_newmodal_title_newmodal_queryselector_modal_title_body_i18n.t('ui_i18n_t_ui_components_js')al_bd_close_close_button_styles_scripts_isopen_true_createdat_di18n.t('ui_i18n_t_ui_error_handling_js')al_with_proper_animation_requestanimationframe_newmodal_classlist_add_show_newmodal_style_opaciti18n.t('ui_modalsystem')l_style_transform_scale_0_9i18n.t('ui_return_fallback_modal_ui_const_fallbackmodal_document_createi18n.t('ui_div')ment_div_fallbackmodal_classname_i18n.t('ui_modal_erroi18n_t')ui_times_ai18n.t('ui_ack')allbackmodal_innerhtml')out_if_modalstack_includes_modaldi18n.t('ui_i18n_t_ui_modal_error_content')ui_modal_error')data_catch_error_console_error_error_creai18n.t('ui_setup_close_button_handler_with_proper_event_prevention_const_close_button_newmodal_queryselector_modal_close_close_button_addeventlistener_click_event_event_preventdefault_event_stoppropagation_closemodal_add_modal_to_dom_document_body_appendchild_newmodal_initialize_modal_state_const_modaldata_element_newmodal_title_newmodal_queryselector_modal_title_body_newmodal_queryselector_modal_bd_close_close_button_styles_scripts_isopen_true_createdat_date_now_name_name_show_the_modal_with_proper_animation_requestanimationframe_newmodal_classlist_add_show_newmodal_style_opacity_0_newmodal_style_transform_scale_0_9i18n_t')onobserver_obs_if_document_contains_modal_element_obs_disconnect_resolve_observer_observe_document_body_childlist_true_subtree_true_set_loading_state_withi18n.t('ui_out_if_modalstack_includes_modaldata_newmodal_focus_100_ri18n_t')odalcount_modalsi18n.t('ui_data_catch_error_consolei18n.t('ui_return_fallback_modal_ui_const_fallbackmodal_document_createelement_div_fallbackmodal_classname_modal_erroi18n_t_ui_times_ack_fallbackmodal_innerhtml')penmodal_modalerrorboundary_wrapasync_async_function_modalpath_optii18n.t('ui_modal_error')_store_the_currently_focused_element_for_later_restoration_const_activeelement_document_activeelement_if_activeelement_activeelement_setattribute_data_last_focused_true_create_new_modal_instance_with_name_const_modalname_options_name_modalpath_modal_date_now_const_modal_createmodalelement_modalname_set_up_mutation_observer_for_modal_removal_detection_const_observer_new_mutationobserver_obs_if_document_contains_modal_element_obs_disconnect_resolve_observer_observe_document_body_childlist_true_subtree_true_set_loading_state_with_better_ux_modal_body_innerhtml')ml_doc_html_classlist_const_inner_modal_element_queryselector_modal_inner_if_inner_inner_classlist_add_array_from_doc_hti18n.t('ui_loading_modalpath')doc_body_doc_body_classlist_modal_bodyi18n.t('ui_add_modal_to_stack_immediately_for_proper_state_management_modalstack_push_modal_handle_body_overflow_for_proper_modal_behavior_if_modalstack_length_1_const_scrollbarwidth_window_innerwidth_document_documentelement_clientwidth_document_body_style_overflow_hidden_document_body_style_paddingright_scrollbarwidth_px_use_importcomponent_to_load_the_modal_content_with_enhanced_error_handling_const_componentpath_modalpath_startswith_modalpath_slice_1_modalpath_load_modal_content_with_proper_error_handling_and_timing_importcomponent_componentpath_modal_body_then_doc_try_set_the_title_from_the_document_with_fallback_modal_title_innerhtml_doc_doc_title_modalpath_apply_css_classes_from_document_if_available_if_doc_doc_html_doc_html_classlist_const_inner_modal_element_queryselector_modal_inner_if_inner_inner_classlist_add_array_from_doc_html_classlist_if_doc_doc_body_doc_body_classlist_modal_body_classlist_add_array_from_doc_body_classlist_trigger_modal_ready_event_modal_element_dispatchevent_new_customevent_modalready_detail_modal_path_modalpath_focus_management_for_accessibility_settimeout_if_modal_element_document_contains_modal_element_modal_element_focus_move_focus_to_first_focusable_element_if_available_const_firstfocusable_modal_element_queryselector_button_href_input_select_textarea_tabindex_not_tabindex_1_if_firstfocusable_firstfocusable_focus_100_catch_rendererror_console_error_error_rendering_modal_content_rendererror_modal_body_innerhtml')g_text')"i18n.t('ui_loading_modalpath_div_div_add_modal_to_stack_immediately_i18n.t('ui_rendering_error')anagement_modalstack_push_modal_handle_body_overflow_for_proi18n.t('ui_failed_to_render_modal_content_rendererror_message')lbarwidth_window_innerwidth_document_documentelemei18n.t('ui_catch_error_console_error_error_loading_modal_content_error_modal_body_innerhtml')'ui_document_body_style_paddingright_scrollbarwidth_px_use_importcomponent_i18n.t('ui_loading_error')l_content_with_enhanced_error_handling_const_componentpathi18n.t('ui_failed_to_load_modal_content_error_message')path_load_modal_content_with_proper_error_handling_and_timing_importcomponent_componentpath_modi18n.t('ui_retry')then_doc_try_set_the_title_from_the_document_with_fallback_modal_title_innerhtml_doc_doc_title_modalpath_api18n.t('ui_i18n_t')lasses_from_documei18n.t('ui_i18n_t')ilable_if_doc_i18n.t('ui_i18n_t')doc_html_classlist_ci18n.t('ui_i18n_t')r_modal_element_qui18n.t('ui_i18n_t')or')"i18n.t('ui_ii18n.t('ui_i18n_t')modal_inner')"i18n.t('ui_if_inner_inner_classlist_add_array_from_doc_html_classlist_if_doc_doc_body_doc_body_classlist_modal_body_classlist_add_array_from_doc_body_classlist_trigger_modal_ready_event_modal_element_dispatchevent_new_customevent_modalready_detail_modal_path_modalpath_foci18n.t('ui_i18n_t')ment_for_aci18n.t('ui_i18n_t')ty_settimeout_if_modal_element_document_contains_modal_element_modal_element_focus_move_focus_to_first_focusable_element_if_available_const_firstfocusable_modal_element_queryselector_button_href_input_select_textarea_tabindex_not_tabindex')"i18n.t('ui_i18n_t_ui_1')"i18n.t('ui_if_firstfocusable_firstfocusable_focus_100_catch_rendererror_console_error_error_rendering_modal_content_rendererror_modal_body_innerhtml_div_class')"i18n.t('ui_i18n_t_ui_modal_error')"i18n.t('ui_div_class')"i18n.t('ui_i18n_t_ui_error_title')"i1i18n.t('ui_i18n_t')rendering_error_i18n.t('ui_i18n_t')lass')"i18n.t('ui_i18n_t_ui_error_message')"i18n.t('ui_failed_to_render_modal_content_rendererror_message_div_div_catch_error_console_error')"i18n.t('ui_i18n_t_ui_error_loading_modal_content')"i18n.t('ui_error_modal_body_innerhtml_div_class')"i18n.t('ui_i18n_t_ui_modal_error')"i18n.t('ui_div_class')"i18n.t('ui_i18n_t_ui_error_title')"i18n.t('ui_loading_error_div_div_class')"i18n.t('ui_i18n_t_ui_error_message')"i18n.t('ui_failed_to_load_modal_content_error_message_div_button_class')"i18n.t('ui_i18n_t_ui_error_retry')"i18n.t('ui_i18n.t('ui_i18n_t')"i18n.i18n.t('ui_i18n_t')n_t_ui_openmodal_modalpath')"i18n.t('ui_retry_button_div_reject_promise_if_modal_loading_fails_critically_if_options_rejectonerror_reject_error_finally_i18n.t('ui_i18n_t')dal_z_indexes_rei18n.t('ui_i18n_t')of_load_outcomi18n.t('ui_i18n_t')odalzindexes_cati18n.t('ui_i18n_t')await_handleerror_error_component_i18n.t('ui_i18n_t')em_function_openmoi18n.t('ui_i18n_t')path_options_json_stringify_options_throw_error_enhanced_modal_close_function_with_properi18n.t('ui_i18n_t')e_management_export_function_cloi18n.t('ui_i18n_t')odalname_null_if_modalstack_length_0_retui18n.t('ui_i18n_t')t_modalindex_modi18n.t('ui_i18n_t')ength_1_defauli18n.t('ui_i18n_t')_modal_let_modali18n.t('ui_i18n_t')name_find_the_modal_with_the_spei18n.t('ui_i18n_t')me_in_the_stack_moi18n.t('ui_i18n_t')modalstack_findindex_modal_modal_name_modalname_if_modalindex_1_i18n.t('ui_i18n_t')dal_not_found_ini18n.t('ui_i18n_t')t_the_modal_i18n.t('ui_i18n_t')k_at_the_found_index_modi18n.t('ui_i18n_t')tack_modalindex_remove_the_modal_from_stack_modalstack_splice_modalindex_1_else_just_remove_the_last_modal_modal_modalstack_pop_if_modal_modal_element_console_warn_invalid_modal_object_or_element_return_mark_modal_as_closing_modal_isopen_false_remove_modal_specific_styles_and_scripts_with_proper_cleanup_try_if_array_isarray_modal_styles_modal_styles_foreach_styleid_const_styleelement_document_queryselector_data_modal_style')"i18n.t('ui_i18n_t_ui_styleid')"i18n.t('ui_if_styleelement_styleelement_remove_if_array_isarray_modal_scripts_modal_scripts_foreach_scriptid_const_scriptelement_document_queryselector_data_modal_script')"i18n.t('ui_i18n_t_ui_scriptid')"i18n.t('ui_if_scriptelement_scriptelement_remove_catch_cleanuperror_console_warn_error_cleaning_up_modal_resources_cleanuperror_animate_modal_closure_modal_element_style_opacity')"0"i18n.t('ui_i18n_t_ui_i18n_t_ui_modal_element_style_transform')"scale(0.9)"i18n.t('ui_i18n_t_ui_i18n_t_ui_modal_element_classlist_remove')"show"i18n.t('ui_i18n_t_ui_i18n_t_ui_remove_the_modal_element_from_dom_after_animation_completes_const_removemodalelement_try_if_modal_element_modal_eli18n_t_ui_return_fallback_modal_ui_const_fai18n.t('ui_i18n_t')al_document_i18n.t('ui_i18n_t')ment_div_fallbackmodal_classname_modal_error_fallback_fallbackmodal_innerhtml_for_proper_animation_comi18n_t_ui_modal_error_st_transitionhandler_event_ii18n_t_ui_ei18n.t('ui_i18n_t')usermessage_ci18n.t('ui_i18n_t')_element_removeeventlistener_transitionend_transitionhandler_removemodalelemi18n_t_ui_close_odal_element_addeventlistener_transii18n_t_ui_document_body_appendchild_fallbaci18n.t('ui_0_i18n_t')rn_fallbackmodal_modal_functionality_with_imi18n.t('ui_scale_0_9_i18n_t')const_modalstack_const_modalstate_isinitializi18n.t('ui_show_i18n_t')emodalcount_0_backdropzindex_2999_basemodalzindex_3000_modalspacing_20_animationduration_300_create_a_single_backdrop_for_all_modals_with_improved_event_handling_const_backdrop_document_createelement_div_backdrop_classname_modal_backdrop_backdrop_style_display_none_backdrop_style_backdropfilter_blur_5px_backdrop_style_transition_opacity_modalstate_animationduration_ms_ease_backdrop_style_opacity_0_improved_backdrop_click_handling_with_proper_event_delegation_backdrop_addeventlistener_click_event_if_event_target_backdrop_closemodal_prevent_backdrop_clicks_from_bubbling_when_clicking_inside_modal_backdrop_addeventlistener_mousedown_event_if_event_target_backdrop_event_preventdefault_document_body_appendchild_backdrop_enhanced_z_index_management_with_proper_stacking_and_animation_function_updatemodalzindexes_const_basemodalzindex_modalspacing_backdropzindex_animationduration_modalstate_update_z_index_for_all_modals_with_proper_stacking_modalstack_foreach_modal_index_const_zindex_basemodalzindex_index_modalspacing_modal_element_style_zindex_zindex_add_transition_for_smooth_appearance_disappearance_if_modal_element_style_transition_modal_element_style_transition_transform_animationduration_ms_ease_opacity_animationduration_ms_ease_enhanced_backdrop_visibility_handling_with_animation_if_modalstack_length_0_backdrop_style_display_block_animate_backdrop_opacity_settimeout_backdrop_style_opacity_1_10_if_modalstack_length_1_for_multiple_modals_position_backdrop_between_the_top_two_const_topmodalindex_modalstack_length_1_const_previousmodalzindex_basemodalzindex_topmodalindex_1_modalspacing_backdrop_style_zindex_previousmodalzindex_modalspacing_2_else_for_single_modal_position_backdrop_below_it_backdrop_style_zindex_backdropzindex_else_animate_backdrop_fade_out_backdrop_style_opacity_0_hide_backdrop_after_animation_completes_settimeout_if_modalstack_length_0_backdrop_style_display_none_animationduration_modalstate_activemodalcount_modalstack_length_enhanced_modal_creation_with_proper_error_handling_and_lifecycle_management_function_createmodalelement_name_try_create_modal_element_with_proper_attributes_const_newmodal_document_createelement_div_newmodal_classname_modal_newmodal_modalname_name_modal_date_now_save_name_to_the_object_newmodal_setattribute_role_dialog_newmodal_setattribute_aria_modal_true_newmodal_setattribute_aria_labelledby_modal_title_name_newmodal_tabindex_1_make_focusable_add_enhanced_click_handler_with_proper_event_delegation_newmodal_addeventlistener_click_event_only_close_if_clicking_directly_on_the_modal_container_not_its_content_if_event_target_newmodal_closemodal_add_keyboard_event_handling_for_accessibility_newmodal_addeventlistener_keydown_event_if_event_key_escape_closemodal_create_enhanced_modal_structure_with_proper_accessibility_newmodal_innerhtml_s_with_improved_event_handling_const_backdrop_document_createelement')"i18n.t('ui_div')"i18n.t('ui_i18n_t_ui_backdrop_classname')"i18n.t('ui_modal_backdrop')"i18n.t('ui_i18n_t_ui_backdrop_style_display')"i18n.t('ui_none')"i18n.t('ui_i18n_t_ui_backdrop_style_backdropfilter')"i18n.t('ui_blur_5px')"i18n.t('ui_i18n_t_ui_backdrop_style_transition_opacity_modalstate_animationduration_ms_ease_backdrop_style_opacity')"0"i18n.t('ui_i18n_t_ui_i18n_t_ui_improved_backdrop_click_handling_with_proper_event_delegation_backdrop_addeventlistener')"click"i18n.t('ui_i18n_t_ui_i18n_t_ui_event_if_event_target_backdrop_closemodal_prevent_backdrop_clicks_from_bubbling_when_clicking_inside_modal_backdrop_addeventlistener')"mousedown"i18n.t('ui_i18n_t_ui_i18n_t_ui_event_if_event_targi18n.t('ui_i18n_t')op_eventi18n.t('ui_i18n_t')efault_document_body_api18n.t('ui_i18n_t')_backdrop_enhanced_i18n.t('ui_i18n_t')anagement_with_proper_stacki18n.t('ui_i18n_t')nimation_i18n.t('ui_i18n_t')updatemodalzindexes_const_basemodai18n.t('ui_i18n_t')odalspacing_bi18n.t('ui_i18n_t')ndex_animationduration_modalstate_update_z_index_for_all_modals_with_proper_stacking_modalstack_foi18n.t('ui_0_i18n_t')_index_const_zindex_basemodalzindex_index_modalspacing_modal_element_style_zindex_zindex_add_transitioi18n.t('ui_click_i18n_t')pearance_disappearance_if_modal_element_style_transition_modal_element_style_transition_transform_animationduration_ms_ease_opacity_animationduratii18n.t('ui_mousedown_i18n_t')_backdrop_visibility_handling_with_animation_if_modalstack_length_0_backdrop_style_display')"block"i18n.t('ui_i18n_t_ui_i18n_t_ui_animate_backdrop_opacity_settimeout_backdrop_style_opacity')"1"i18n.t('ui_i18n_t_ui_i18n_t_ui_10_if_modalstack_length_1_for_multiple_modals_position_backdrop_between_the_top_two_const_topmodalindex_modalstack_length_1_const_previousmodalzindex_basemodalzindex_topmodalindex_1_modalspacing_backdrop_style_zindex_previousmodalzindex_modalspacing_2_else_for_single_modal_position_backdrop_below_it_backdrop_style_zindex_backdropzindex_else_animate_backdrop_fade_out_backdrop_style_opacity')"0"i18n.t('ui_i18n_t_ui_i18n_t_ui_hide_backdrop_after_animation_completes_settimeout_if_modalstack_lengti18n.t('ui_block_i18n_t')yle_display')"none"i18n.t('ui_i18n_t_ui_i18n_t_ui_animationduration_modali18n.t('ui_1_i18n_t')emodalcount_modalstack_length_enhanced_modal_creation_with_proper_error_handling_and_lifecycle_management_function_createmodalelement_name_try_create_modal_element_with_proper_attributes_const_newmodal_document_createelement')"div"i18n.t('ui_i18n_t_ui_i18n_t_ui_newmodal_classname')"modal"i18n.t('ui_i18n_t_ui_i18n_t_ui_newmodal_modalname_name_modal_date_now_save_name_to_the_object_newmodal_setattribute')i18n.t('ui_0_i18n_t')t('ui_i18n_t_ui_i18n_t_ui')"dialog"i18n.t('ui_i18n_t_ui_i18n_t_ui_newmodal_setattribute')"aria-modal"i18n.t('uii18n.t('ui_none_i18n_t')n_t_ui')"true"i18n.t('ui_i18n_t_ui_i18n_t_ui_newmodal_setattribute')"aria-labelledby"i18n.t('ui_i18n_t_ui_i18n_t_ui_modal_title_name_newmodal_tabindex_1_make_focusable_add_enhanced_click_handler_with_proper_event_delegation_newmodal_addeventlistener')"click"i18n.t('ui_i18ni18n.t('ui_div_i18n_t')ui_event_only_close_if_clicking_di18n.t('ui_modal_i18n_t')modal_container_not_its_content_if_event_target_newmodal_closemodal_add_keyboard_event_handling_fori18n.t('ui_role_i18n_t')_newmodal_addei18n.t('ui_dialog_i18n_t')eydown"i18n.t('ui_i18n_t_ui_i18n_t_ui18n.t('ui_aria_modal_i18n_t')')"Escape"i18ni18n.t('ui_true_i18n_t')ui_i18n_t_ui_closemodal_create_enhani18n.t('ui_aria_labelledby_i18n_t')proper_accessibility_newmodal_innerhtml_div_class')"modal-inner"i18n.t('ui_i18n_t_ui_i18n_t_ui_div_class')"modal-header"i18n.t('ui_i18n_t_ui_i18n_t_i18n.t('ui_click_i18n_t')odal-title"i18n.t('ui_i18n_t_ui_i18n_t_ui_id')"modal-title-${name}"i18n.t('ui_i18n_t_ui_i18n_t_ui_h2_button_class')"modal-close"i18n.t('ui_i18n_t_ui_i18n_t_ui_aria_label')"Close modal"i18n.t('ui_i18ni18n.t('ui_keydown_i18n_t')imes_button_div_div_class')"modali18n.t('ui_escape_i18n_t')ui_i18n_t_ui_i18n_t_ui_div_class')"modal-bd"i18n.t('ui_i18n_t_ui_i18n_t_ui_div_div_div_setup_close_button_handlei18n.t('ui_modal_inner_i18n_t')revention_const_close_bui18n.t('ui_modal_header_i18n_t')ector')".modal-close"i1i18n.t('ui_modal_title_i18n_t')8n_t_ui_close_buti18n.t('ui_modal_title_name_i18n_t')i18n.t('ui_i18n_t_ui_i18n_t_uii18n.t('ui_modal_close_i18n_t')efault_event_stoppropagati18n.t('ui_close_modal_i18n_t')dal_to_dom_document_body_appendchild_newmi18n.t('ui_modal_scroll_i18n_t')state_const_modaldata_eli18n.t('ui_modal_bd_i18n_t')le_newmodal_queryselector')".modal-title"i18n.t('ui_i18n_t_ui_i18n_t_ui_body_newmodal_queryselector')".modal-bd"i18n.t('ui_ii18n.t('ui_modal_close_i18n_t')se_close_button_styles_scripts_isopen_true_ci18n.t('ui_click_i18n_t')ow_name_name_show_the_modal_with_proper_animation_requestanimationframe_newmodal_classlist_add')"show"i18n.t('ui_i18n_t_ui_i18n_t_ui_newmodal_style_opacity')"0"i18n.t('ui_i18n_t_ui_i18n_t_ui_newmodal_style_transi18n.t('ui_modal_title_i18n_t').t('ui_i18n_t_ui_i18n_t_ui_trigger_animatii18n.t('ui_modal_bd_i18n_t')frame_newmodal_style_opacity')"1"i18n.t('ui_i18n_t_ui_i18n_t_ui_newmodal_style_transform')"scale(1)"i18n.t('ui_i18n_t_ui_i18n_t_ui_update_modal_z_indexes_updatemodalzindexi18n.t('ui_show_i18n_t')ement_for_accessibility_settimeout_ifi18n.t('ui_0_i18n_t')_includes_modaldata_newmodal_focus_100_i18n.t('ui_scale_0_9_i18n_t')ch_error_console_error')"Error creating modal element:"i18n.t('ui_i18n_t_ui_ii18n.t('ui_1_i18n_t')ror_throw_new_error_failed_to_create_moi18n.t('ui_scale_1_i18n_t')enhanced_modal_opening_with_proper_lifecycle_management_and_error_handling_export_const_openmodal_modalerrorboundary_wrapasync_async_function_modalpath_options_try_try_store_the_currently_focused_eli18n.t('ui_error_creating_modal_element_i18n_t')eelement_document_activeelement_if_activeelement_activeelement_setattribute_data_last_focused_true_create_new_modal_instance_with_name_const_modalname_options_name_modalpath_modal_date_now_const_modal_createmodalelement_modalname_set_up_mutation_observer_for_modal_removal_detection_const_observer_new_mutationobserver_obs_if_document_contains_modal_element_obs_disconnect_resolve_observer_observe_document_body_childlist_true_subtree_true_set_loading_state_with_better_ux_modal_body_innerhtml_div_class')"modal-loading"i18n.t('ui_i18n_t_ui_i18n_t_ui_div_class')"loading-spinner"i18n.t('ui_i18n_t_ui_i18n_t_ui_div_div_class')"loading-text"i18n.t('ui_i18n_t_ui_i18n_t_ui_loading_modalpath_div_div_add_modal_to_stack_immediately_for_proper_state_management_modalstack_push_modal_handle_body_overflow_for_proper_modali18n.t('ui_modal_loading_i18n_t')_length_1_const_scrollbai18n.t('ui_loading_spinner_i18n_t')document_documentelement_clii18n.t('ui_loading_text_i18n_t')_style_overflow')"hidden"i18n.t('ui_i18n_t_ui_i18n_t_ui_document_body_style_paddingright_scrollbarwidth_px_use_importcomponent_to_load_the_modal_content_with_enhanced_error_handling_const_componentpath_modalpath_startswith_modalpath_slice_1_modalpath_load_modal_content_with_proper_error_handlingi18n.t('ui_hidden_i18n_t')rtcomponent_componentpath_modal_body_then_doc_try_set_the_title_from_the_document_with_fallback_modal_title_innerhtml_doc_doc_title_modalpath_apply_css_classes_from_document_if_available_if_doc_doc_html_doc_html_classlist_const_inner_modal_element_queryselector')".modal-inner"i18n.t('ui_i18n_t_ui_i18n_t_ui_if_inner_inner_classlist_add_array_from_doc_html_classlist_if_doc_doc_body_doc_body_classlist_modal_body_classlist_add_array_from_doc_body_classlist_trigger_modal_ready_event_modal_element_dispatchevent_new_customevent_modali18n.t('ui_modal_inner_i18n_t')h_modalpath_focus_management_for_accessibility_settimeout_if_modal_element_document_contains_modal_element_modal_element_focus_move_focus_to_first_focusable_element_if_available_const_firstfocusable_modal_element_queryselector_button_href_input_select_textarea_tabindex_not_tabindex')"-1"i18n.t('ui_i18n_t_ui_i18n_t_ui_if_firstfocusable_firstfocusable_focus_100_catch_rendererror_console_error_error_rendering_modal_content_rendererror_modal_body_innerhtml_div_class')"modal-error"i18n.t('ui_i18n_t_ui_i18n_t_ui_div_class')"error-title"i18n.t(i18n.t('ui_1_i18n_t')i_i18n_t_ui_rendering_error_div_div_class')"error-message"i18n.t('ui_i18n_t_ui_i18n_t_ui_failed_to_render_modal_content_rendererror_message_div_div_catch_error_coi18n.t('ui_modal_error_i18n_t')oading modal content:"i1i18n.t('ui_error_title_i18n_t')8n_t_ui_error_modal_body_innerhtml_div_classi18n.t('ui_error_message_i18n_t')ui_i18n_t_ui_i18n_t_ui_div_class')"error-title"i18n.t('ui_i18n_t_ui_i18n_t_ui_loading_error_div_divi18n.t('ui_error_loading_modal_content_i18n_t')_t_ui_i18n_t_ui_failed_to_load_modal_content_error_i18n.t('ui_modal_error_i18n_t')ass')"error-retry"i18n.ti18n.t('ui_error_title_i18n_t')_ui_onclick')"openModal('${modalPath}')"i1i18n.t('ui_error_message_i18n_t')_t_ui_retry_button_div_reject_promise_if_modal_loading_fails_critically_ifi18n.t('ui_error_retry_i18n_t')r_reject_error_finallyi18n.t('ui_openmodal')l_z_indexes_rei18n.t('ui_i18n_t')of_load_outcome_updatemodalzindexes_catch_error_await_handleerror_error_component_modalsystem_function_openmodal_modalpath_options_json_stringify_options_throw_error_enhanced_modal_close_function_with_proper_lifecycle_management_export_function_closemodal_modalname_null_if_modalstack_length_0_return_try_let_modalindex_modalstack_length_1_default_to_last_modal_let_modal_if_modalname_find_the_modal_with_the_specified_name_in_the_stack_modalindex_modalstack_findindex_modal_modal_name_modalname_if_modalindex_1_return_modal_not_found_in_stack_get_the_modal_from_stack_at_the_found_index_modal_modalstack_modalindex_remove_the_modal_from_stack_modalstack_splice_modalindex_1_else_just_remove_the_last_modal_modal_modalstack_pop_if_modal_modal_element_console_warn_invalid_modal_object_or_element_return_mark_modal_as_closing_modal_isopen_false_remove_modal_specific_styles_and_scripts_with_proper_cleanup_try_if_array_isarray_modal_styles_modal_styles_foreach_styleid_const_styleelement_document_queryselector_data_modal_style')"${styleId}"i18n.t('ui_i18n_t_ui_i18n_t_ui_if_styleelement_styleelement_remove_if_array_isarray_modal_scripts_modal_scripts_foreach_scriptid_const_scriptelemeni18n.t('ui_styleid_i18n_t')ctor_data_modal_script')"${scriptId}"i18n.t('ui_i18n_t_ui_i18n_t_ui_if_scriptelement_scriptelement_remove_catch_cleanuperror_console_warn_error_cleaning_up_modal_resources_ci18n.t('ui_scriptid_i18n_t')odal_closure_modal_element_style_opacity')"0"i18n.t('ui_i18n_t_ui_i18n_t_ui_modal_element_style_transform')"scale(0.9)"i18n.t('ui_i18n_t_ui_i18n_t_ui_modal_element_classlist_remove'i18n.t('ui_0_i18n_t').t('ui_i18n_t_ui_i18n_t_ui_remove_the_modal_i18n.t('ui_scale_0_9_i18n_t')er_animation_completes_const_removemodalelemei18n.t('ui_show_i18n_t')l_element_modal_eli18n_t_ui_return_fallback_modal_ui_const_fallbackmodal_document_createelement_div_fallbackmodal_classname_modal_error_fallback_fallbackmodal_innerhtml_for_proper_animation_comi18n_t_ui_modal_error_st_transitionhandler_event_ii18n_t_ui_errordata_usermessage_city_modal_element_removeeventlistener_transitionend_transitionhandler_removemodalelemi18n_t_ui_close_odal_element_addeventlistener_transitionend_transitionhandler_once_true_fallback_timeout_in_case_transition_doesn_t_fire_const_fallbacktimeout_settimeout_modal_element_removeeventlistener_transitionend_transitionhandler_removemodalelement_modalstate_animationduration_100_handle_backdrop_visibility_and_body_overflow_if_modalstack_length_0_no_modals_left_restore_normal_state_document_body_style_overflow')""i18n.t('ui_i18n_t_ui_i18n_t_ui_document_body_style_paddingright')""i18n.t('ui_i18n_t_ui_i18n_t_ui_remove_poi18n.t('ui_i18n_t')rollbar_compensation_return_focus_to_the_elemeni18n.t('ui_i18n_t')ned_the_modal_const_lastfocusedelement_document_queryselector_data_last_focused_if_lastfocusedelement_lastfocusedelement_focus_lastfocusedelement_removeattribute_data_last_focused_else_return_focus_to_the_previous_modal_if_modalstack_length_0_const_previousmodal_modalstack_modalstack_length_1_if_previousmodal_previousmodal_element_previousmodal_element_focus_update_modal_z_indexes_after_state_change_updatemodalzindexes_clear_the_fallback_timeout_if_modal_was_removed_successfully_modal_element_addeventlistener_transitionend_cleartimeout_fallbacktimeout_once_true_catch_error_console_error_error_closing_modal_error_fallback_force_cleanup_if_something_went_wrong_try_modalstack_foreach_modal_if_modal_element_modal_element_parentnode_modal_element_parentnode_removechild_modal_element_modalstack_length_0_updatemodalzindexes_document_body_style_overflow')""i18n.t('ui_i18n_t_ui_i18n_t_ui_catch_fallbackerror_console_error_fallback_cleanup_failei18n.t('ui_i18n_t')error_function_to_scroll_to_element_by_id_within_the_last_modal_export_function_scrollmodal_id_if_id_return_get_the_last_modal_in_the_stack_const_lastmodal_modalstack_modalstack_length_1_element_if_lastmodal_return_find_the_modal_container_and_target_element_const_modalcontainer_lastmodal_queryselector')".modal-scroll"i18n.t('ui_i18n_t_ui_i18n_t_ui_const_targetelement_lastmodal_quei18n.t('ui_modal_scroll_i18n_t')ontainer_targetelement_modalcontainer_scrollto_top_targetelement_offsettop_20_20px_padding_from_top_behavior')"smooth"i18n.t('ui_i18n_t_ui_i18n_t_ui_make_scrollmodal_globally_avaii18n.t('ui_smooth_i18n_t')_scrollmodal_scrollmodal_handle_modal_content_loading_from_clicks_document_addeventlistener')"click"i18n.t('ui_i18n_t_ui_i18n_t_ui_async_e_const_modaltri18n.t('ui_click_i18n_t')closest')"[data-modal-content]"i18n.t('ui_i18n_t_ui_i18n_ti18n.t('ui_data_modal_content_i18n_t')efault_if_modaltrigger_hasattribute')"disabled"i18n.t('ui_i18n_t_ui_i18n_t_ui18n.t('ui_disabled_i18n_t')sslist_contains')"disabled"i18n.t('ui_i18n_t_ui18n.t('ui_disabled_i18n_t')_const_modalpath_modaltrigger_getattribute')"href"i18n.t('ui_i1i18n.t('ui_href_i18n_t')_ui_await_openmodal_modalpath_close_modal_on_escape_key_closes_only_the_top_modal_document_addeventlistener')"keydown"i18n.t('ui_keydown_i18n_t')_ui_i18n_t_ui_e_if_e_key')"Escape" && modalStack.length > 0) {
    closeModal();
  }
});

// also export as global function
globalThis.openModal = openModal;
globalThis.closeModal = closeModal;
globalThis.scrollModal = scrollModal;
