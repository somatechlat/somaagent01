[pytest]
# Ignore virtual environment
norecursedirs = .venv
# Define where to look for tests
testpaths = tests
# Pattern for test files
python_files = test_*.py *_test.py
asyncio_default_fixture_loop_scope = function
# Ensure the repository root is on PYTHONPATH so that the top‑level ``python`` package
# is importable before any third‑party ``python`` distribution that might exist.
pythonpath = .
markers =
	live: requires full running stack (Gateway + workers + Kafka + Postgres + OPA); fails fast if unavailable
	db: interacts with real Postgres (no mocks); requires TEST_SA01_DB_DSN or running compose stack
	kafka: produces/consumes real Kafka messages
	gateway: calls live HTTP endpoints on the running Gateway service
	e2e: cross-service flow (document ingest, memory pipelines, chat) exercising multiple subsystems
	playwright: browser UI validation via Playwright (real UI served by Gateway)
	smoke: fast high-value path (minimal UI/API) expected to pass in any dev stack
	slow: intentionally long-running scenario (load, soak, large migrations)
	performance: timing/latency assertions against real services
	critical: protects core invariants (blocking merge if failing)
	flaky: temporarily unstable; tracked for stabilization (still runs, but flagged)
	optional: non-critical exploratory tests (can be deselected explicitly)
filterwarnings =
    ignore::pytest.PytestUnknownMarkWarning
