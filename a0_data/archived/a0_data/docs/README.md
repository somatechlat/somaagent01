# Soma Project – Documentation Overview

This repository follows the **canonical documentation set** required for every Soma component.  All markdown files must be kept in sync with the code base and the upstream `agents.md` specification.

## Required Docs (must exist)

| File | Location | Purpose |
|------|----------|---------|
| `README.md` | repository root | High‑level project pitch, quick‑start badge, link to full docs |
| `docs/README.md` | `docs/` | Deep dive – architecture, components, onboarding flow |
| `docs/CONTRIBUTING.md` | `docs/` | How external contributors can get started |
| `docs/CODE_OF_CONDUCT.md` | `docs/` | Community standards |
| `docs/agents.md` | `docs/` | **Copy** of the upstream agents specification (https://agents.md/) – must be synced weekly |
| `docs/CHANGELOG.md` | `docs/` | Release history |
| `docs/ARCHITECTURE.md` | `docs/` | Detailed Mermaid diagram and description of each layer (UI, Core, Infra, Observability) |
| `docs/SECURITY.md` | `docs/` | Threat model, data‑at‑rest/in‑transit handling, secret management |
| `docs/TESTING.md` | `docs/` | Test strategy – unit, integration, e2e, performance, chaos |
| `docs/CI.md` | `docs/` | CI pipeline description, required secrets, badge generation |

All markdown files should conform to **CommonMark** and be lint‑checked with `markdownlint-cli` (add a `lint-docs` target to the Makefile if desired).

---
## Repository Layout (auto‑generated snapshot)

```
$(cat /a0/tmp/chats/Vg5MJcaK/messages/28.txt | head -n 40)
```

> The above tree is a snapshot of the current repository.  New modules must be placed under `src/` (or the appropriate language folder) and imported using the package name `soma`.

---
## Onboarding Checklist (Coder Agent)

```markdown
- [ ] Clone the repository (`git clone …`)
- [ ] Run `make setup` – creates venv, installs deps.
- [ ] Verify `make lint` passes (flake8, mypy, black, isort).
- [ ] Run `make test` – all tests must succeed.
- [ ] Generate docs: `make doc` and open `site/index.html`.
- [ ] Review `docs/agents.md` – ensure it matches the upstream spec.
- [ ] Run `make build` and optionally `make deploy` to a dev cluster.
- [ ] Add a personal entry to `docs/CHANGELOG.md` describing your first commit.
- [ ] Sign the Contributor License Agreement (if required).
```

---
## CI/CD – GitHub Actions Skeleton

Create `.github/workflows/ci.yml` with the following jobs (Ubuntu‑latest):
1. **setup** – checkout, install Python, cache `pip`.
2. **lint** – `make lint`.
3. **format** – `make format` (fails if code is not formatted).
4. **test** – `make test` with coverage upload.
5. **doc** – `make doc` and publish to GitHub Pages.
6. **docker** – `make build` and push image to a registry.
7. **security** – run `bandit` and `safety check` on dependencies.

All jobs must stop on first failure (`continue-on-error: false`).

---
## Synchronisation with agents.md
- The repository contains a copy of the upstream spec at `docs/agents.md`.
- A scheduled GitHub Action (`sync_agents.yml`) runs daily to fetch the latest spec and create a PR if it diverges.

---
*Generated by SomaAgent /01 – Developer profile.*
