# Canonical Makefile shim (deprecated)
#
# This file is kept for backwards compatibility but is intentionally minimal.
# Single point of entry is the root Makefile. Prefer these targets:
#   - make dev-up | dev-down | dev-logs | dev-rebuild | dev-down-clean
#   - make build | up | down | logs (power users)
#
# All targets below delegate to the root Makefile and print a deprecation notice.

.PHONY: help build run stop clean test lint setup logs restart shell monitoring

ROOT_MAKE := Makefile

define _deprecated
@echo "ERROR: Makefile.canonical has been removed. Use the root Makefile targets (single entry point).";
@echo "Suggested: dev-up | dev-down | dev-logs | dev-rebuild | dev-down-clean";
@exit 1
endef

help:
	$(_deprecated)
	@$(MAKE) -f $(ROOT_MAKE) help

build:
	$(_deprecated)
	@$(MAKE) -f $(ROOT_MAKE) build

run:
	$(_deprecated)
	@$(MAKE) -f $(ROOT_MAKE) dev-up

stop:
	$(_deprecated)
	@$(MAKE) -f $(ROOT_MAKE) dev-down

clean:
	$(_deprecated)
	@$(MAKE) -f $(ROOT_MAKE) dev-down-clean

logs:
	$(_deprecated)
	@$(MAKE) -f $(ROOT_MAKE) dev-logs

restart:
	$(_deprecated)
	@$(MAKE) -f $(ROOT_MAKE) dev-rebuild

shell:
	$(_deprecated)
	@echo "Tip: gateway shell -> docker exec -it somaAgent01_gateway /bin/bash";

test:
	$(_deprecated)
	@python3 -m pytest -q || true

lint:
	$(_deprecated)
	@python3 -m ruff check . || true

setup:
	$(_deprecated)
	@echo "Use .venv and pyproject/requirements.*; provider secrets via UI Settings.";

monitoring:
	$(_deprecated)
	@echo "Prometheus and health paths are exposed by services; see Makefile help."
