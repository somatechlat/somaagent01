[supervisord]
nodaemon=true
logfile=/dev/stdout
logfile_maxbytes=0
loglevel=info
user=appuser

# ═══════════════════════════════════════════════════════════════════════════════
# 1. SOMA BRAIN (Cognitive Core) - Port 9696
# ═══════════════════════════════════════════════════════════════════════════════
[program:somabrain]
command=gunicorn somabrain.wsgi:application --bind 0.0.0.0:9696 --workers 2 --timeout 120
directory=/app
autostart=true
autorestart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
environment=DJANGO_SETTINGS_MODULE="somabrain.settings.production"

# ═══════════════════════════════════════════════════════════════════════════════
# 2. FRACTAL MEMORY (Vector Store) - Port 10101
# ═══════════════════════════════════════════════════════════════════════════════
[program:somafractalmemory]
command=uvicorn somafractalmemory.asgi:application --host 0.0.0.0 --port 10101 --workers 1
directory=/app
autostart=true
autorestart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
environment=DJANGO_SETTINGS_MODULE="somafractalmemory.settings",PYTHONPATH="/app/somafractalmemory"

# ═══════════════════════════════════════════════════════════════════════════════
# 3. AGENT 01 (Orchestrator / AAAS) - Port 9000
# ═══════════════════════════════════════════════════════════════════════════════
[program:somaagent]
command=uvicorn services.gateway.asgi:application --host 0.0.0.0 --port 9000 --workers 1
directory=/app
autostart=true
autorestart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
environment=DJANGO_SETTINGS_MODULE="services.gateway.settings"
