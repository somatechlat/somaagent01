global:
  DEPLOY_MODE: dev_full
  JWT_ENABLED: false
  OPA_ENABLED: false
  MTLS_ENABLED: false
  REPLICA_COUNT: 1
  PDB_ENABLED: false
  PDB_MIN_AVAILABLE: 1
  RESOURCE_REQUESTS:
    cpu: 100m
    memory: 128Mi
  RESOURCE_LIMITS:
    cpu: 200m
    memory: 256Mi
  ISTIO_INJECTION: false
  VAULT_AGENT_INJECT: false
  PROMETHEUS_SCRAPE: true
  PROM_OPERATOR_ENABLED: false
  OTEL_ENABLED: true
  ISTIO_ENABLED: false
  imagePullSecrets: []
  HPA_ENABLED: false
  NETWORK_POLICY_ENABLED: false

image:
  repository: somaagent01
  tag: latest
  pullPolicy: IfNotPresent

serviceAccounts:
  create: true

env:
  POSTGRES_DSN: "postgresql://soma:soma@postgres:5432/somaagent01"
  KAFKA_BOOTSTRAP_SERVERS: "kafka:9092"
  REDIS_URL: "redis://redis:6379/0"

services:
  gateway:
    enabled: true
    replicas: 1
    port: 8010
    hpa:
      enabled: false
      minReplicas: 1
      maxReplicas: 5
      targetCPUUtilizationPercentage: 70
    ingress:
      enabled: false
      className: ""
      host: ""
      path: "/"
      annotations: {}
      tls: []
    canary:
      enabled: false
      replicas: 1
      weight: 10
      imageTag: ""
    istio:
      enabled: false
      host: ""
      gateways: []
      # traffic weights are percentage integers (0-100)
      weights:
        stable: 90
        canary: 10
      trafficPolicy:
        connectionPool:
          http:
            http1MaxPendingRequests: 1024
            maxRequestsPerConnection: 100
          tcp:
            maxConnections: 1000
        outlierDetection:
          consecutive5xx: 5
          interval: 5s
          baseEjectionTime: 30s
          maxEjectionPercent: 50
      http:
        timeout: 10s
        retries:
          attempts: 2
          perTryTimeout: 3s
  conversationWorker:
    enabled: true
    replicas: 1
    metricsPort: 9400
    hpa:
      enabled: false
      minReplicas: 1
      maxReplicas: 5
      targetCPUUtilizationPercentage: 70
  toolExecutor:
    enabled: true
    replicas: 1
    metricsPort: 9401
    hpa:
      enabled: false
      minReplicas: 1
      maxReplicas: 5
      targetCPUUtilizationPercentage: 70
  delegationGateway:
    enabled: true
    replicas: 1
    port: 8015
    hpa:
      enabled: false
      minReplicas: 1
      maxReplicas: 5
      targetCPUUtilizationPercentage: 70
  delegationWorker:
    enabled: true
    replicas: 1
    metricsPort: 9402
  memoryService:
    enabled: true
    replicas: 1
    port: 20017
    hpa:
      enabled: false
      minReplicas: 1
      maxReplicas: 5
      targetCPUUtilizationPercentage: 70
  ui:
    enabled: true
    replicas: 1
    port: 8080
    hpa:
      enabled: false
      minReplicas: 1
      maxReplicas: 5
      targetCPUUtilizationPercentage: 70
    ingress:
      enabled: false
      className: ""
      host: ""
      path: "/"
      annotations: {}
      tls: []
  uiProxy:
    enabled: true
    replicas: 1
    port: 8081
    hpa:
      enabled: false
      minReplicas: 1
      maxReplicas: 5
      targetCPUUtilizationPercentage: 70
    ingress:
      enabled: false
      className: ""
      host: ""
      path: "/"
      annotations: {}
      tls: []
