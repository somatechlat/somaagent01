# -*- mode: Python -*-
# =============================================================================
# SOMASTACK TILTFILE - MINIMAL WORKING VERSION
# =============================================================================
# Commands:
#   tilt up --port 10351
#   open http://localhost:10351
# =============================================================================

print("""
+==============================================================+
|         SOMASTACK - LOCAL DEVELOPMENT                        |
+==============================================================+
|  Dashboard:   http://localhost:10351                         |
|  WebUI:       http://localhost:20173                         |
|  Django API:  http://localhost:20020                         |
+==============================================================+
""")

# =============================================================================
# WEBUI DEVELOPMENT
# =============================================================================

local_resource(
    'webui-dev',
    serve_cmd='npm run dev -- --port 20173',
    serve_dir='webui',
    links=['http://localhost:20173'],
    labels=['frontend'],
)

# =============================================================================
# DJANGO API
# =============================================================================

local_resource(
    'django-api',
    serve_cmd='.venv/bin/python manage.py runserver 0.0.0.0:20020',
    serve_dir='.',
    links=['http://localhost:20020/api/v2/docs'],
    labels=['backend'],
)
